{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport function searchImage(request) {\n  const API_KEY = '49486795-430aa06a6e639b9f88254bdb1';\n  const URL =\n    'https://pixabay.com/api/?key=' +\n    API_KEY +\n    '&q=' +\n    encodeURIComponent(request) +\n    '&image_type=photo' +\n    '&orientation=horizontal' +\n    '&safesearch=true';\n\n  return axios.get(URL).then(response => [...response.data.hits]);\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet gallery = new SimpleLightbox('.gallery a');\n\nexport function renderGallery(images, galleryHTML) {\n  let markup = images\n    .map(\n      image => `\n      <li>\n        <a href=\"${image.largeImageURL}\"><img src=\"${image.webformatURL}\" alt=\"${image.tags}\" width=\"360\" height=\"200\" /></a>\n        <table class=\"caption\">\n          <thead>\n            <tr>\n              <th>Likes</th>\n              <th>Views</th>\n              <th>Comments</th>\n              <th>Downloads</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <td>${image.likes}</td>\n              <td>${image.views}</td>\n              <td>${image.comments}</td>\n              <td>${image.downloads}</td>\n            </tr>\n          </tbody>\n        </table>\n      </li>`\n    )\n    .join('');\n\n  // const galleryOption = {\n  //   captionSelector: 'img',\n  //   captionType: 'attr',\n  //   captionsData: 'alt',\n  //   captionDelay: 250,\n  // };\n  galleryHTML.innerHTML = markup;\n\n  gallery.refresh();\n\n  //   gallery.on('show.simplelightbox', function () {\n  //     // Do something…\n  //   });\n\n  // gallery.on('error.simplelightbox', function (e) {\n  //   console.log(e); // Some usefull information\n  // });\n}","import { searchImage } from './js/pixabay-api';\nimport { renderGallery } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\niziToast.settings({\n  position: 'topRight',\n  iconColor: '#fff',\n  messageColor: '#fff',\n});\n\nconst galleryHTML = document.querySelector('.gallery');\nconst form = document.querySelector('.form');\nconst loadMoreBtn = document.querySelector('.load-more'); // Додаємо кнопку\n\nlet request = '';\nlet page = 1;\n\nform.addEventListener('submit', handleSubmit);\nloadMoreBtn.addEventListener('click', loadMoreImages);\n\nfunction handleSubmit(event) {\n  event.preventDefault();\n\n  request = form.elements.request.value.trim();\n  if (!request) {\n    iziToast.warning({\n      message: 'Please enter a search query!',\n    });\n    return;\n  }\n\n  page = 1;\n  galleryHTML.innerHTML = '';\n  form.elements.request.setAttribute('readonly', true);\n  form.elements.button.disabled = true;\n  form.lastElementChild.classList.remove('hidden');\n  loadMoreBtn.classList.add('hidden'); // Ховаємо кнопку перед новим пошуком\n\n  searchImage(request, page)\n    .then(({ hits, totalHits }) => {\n      if (hits.length === 0) {\n        throw new Error('Sorry, no images found. Please try again!');\n      }\n\n      renderGallery(hits);\n      if (totalHits > 15) {\n        loadMoreBtn.classList.remove('hidden'); // Показуємо кнопку \"Load more\"\n      }\n    })\n    .catch(error => {\n      iziToast.error({\n        message: error.message,\n      });\n    })\n    .finally(() => {\n      form.elements.request.removeAttribute('readonly');\n      form.elements.button.disabled = false;\n      form.lastElementChild.classList.add('hidden');\n    });\n}\n\nfunction loadMoreImages() {\n  page += 1;\n  loadMoreBtn.disabled = true;\n\n  searchImage(request, page)\n    .then(({ hits, totalHits }) => {\n      if (hits.length === 0) {\n        iziToast.info({\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n        loadMoreBtn.classList.add('hidden');\n        return;\n      }\n\n      renderGallery(hits);\n\n      const totalPages = Math.ceil(totalHits / 15);\n      if (page >= totalPages) {\n        loadMoreBtn.classList.add('hidden');\n        iziToast.info({\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n      }\n    })\n    .catch(error => {\n      iziToast.error({\n        message: error.message,\n      });\n    })\n    .finally(() => {\n      loadMoreBtn.disabled = false;\n    });\n}\n"],"names":["searchImage","request","URL","axios","response","gallery","SimpleLightbox","renderGallery","images","galleryHTML","markup","image","iziToast","form","loadMoreBtn","page","handleSubmit","loadMoreImages","event","hits","totalHits","error","totalPages"],"mappings":"owBAEO,SAASA,EAAYC,EAAS,CAEnC,MAAMC,EACJ,gCAFc,qCAId,MACA,mBAAmBD,CAAO,EAC1B,2DAIF,OAAOE,EAAM,IAAID,CAAG,EAAE,KAAKE,GAAY,CAAC,GAAGA,EAAS,KAAK,IAAI,CAAC,CAChE,CCXA,IAAIC,EAAU,IAAIC,EAAe,YAAY,EAEtC,SAASC,EAAcC,EAAQC,EAAa,CACjD,IAAIC,EAASF,EACV,IACCG,GAAS;AAAA;AAAA,mBAEIA,EAAM,aAAa,eAAeA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAYvEA,EAAM,KAAK;AAAA,oBACXA,EAAM,KAAK;AAAA,oBACXA,EAAM,QAAQ;AAAA,oBACdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,YAKnC,EACK,KAAK,EAAE,EAQVF,EAAY,UAAYC,EAExBL,EAAQ,QAAS,CASnB,CC7CAO,EAAS,SAAS,CAChB,SAAU,WACV,UAAW,OACX,aAAc,MAChB,CAAC,EAED,MAAMH,EAAc,SAAS,cAAc,UAAU,EAC/CI,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAc,SAAS,cAAc,YAAY,EAEvD,IAAIb,EAAU,GACVc,EAAO,EAEXF,EAAK,iBAAiB,SAAUG,CAAY,EAC5CF,EAAY,iBAAiB,QAASG,CAAc,EAEpD,SAASD,EAAaE,EAAO,CAI3B,GAHAA,EAAM,eAAgB,EAEtBjB,EAAUY,EAAK,SAAS,QAAQ,MAAM,KAAM,EACxC,CAACZ,EAAS,CACZW,EAAS,QAAQ,CACf,QAAS,8BACf,CAAK,EACD,MACJ,CAEEG,EAAO,EACPN,EAAY,UAAY,GACxBI,EAAK,SAAS,QAAQ,aAAa,WAAY,EAAI,EACnDA,EAAK,SAAS,OAAO,SAAW,GAChCA,EAAK,iBAAiB,UAAU,OAAO,QAAQ,EAC/CC,EAAY,UAAU,IAAI,QAAQ,EAElCd,EAAYC,CAAa,EACtB,KAAK,CAAC,CAAE,KAAAkB,EAAM,UAAAC,KAAgB,CAC7B,GAAID,EAAK,SAAW,EAClB,MAAM,IAAI,MAAM,2CAA2C,EAG7DZ,EAAcY,CAAI,EACdC,EAAY,IACdN,EAAY,UAAU,OAAO,QAAQ,CAExC,CAAA,EACA,MAAMO,GAAS,CACdT,EAAS,MAAM,CACb,QAASS,EAAM,OACvB,CAAO,CACF,CAAA,EACA,QAAQ,IAAM,CACbR,EAAK,SAAS,QAAQ,gBAAgB,UAAU,EAChDA,EAAK,SAAS,OAAO,SAAW,GAChCA,EAAK,iBAAiB,UAAU,IAAI,QAAQ,CAClD,CAAK,CACL,CAEA,SAASI,GAAiB,CACxBF,GAAQ,EACRD,EAAY,SAAW,GAEvBd,EAAYC,CAAa,EACtB,KAAK,CAAC,CAAE,KAAAkB,EAAM,UAAAC,KAAgB,CAC7B,GAAID,EAAK,SAAW,EAAG,CACrBP,EAAS,KAAK,CACZ,QAAS,4DACnB,CAAS,EACDE,EAAY,UAAU,IAAI,QAAQ,EAClC,MACR,CAEMP,EAAcY,CAAI,EAElB,MAAMG,EAAa,KAAK,KAAKF,EAAY,EAAE,EACvCL,GAAQO,IACVR,EAAY,UAAU,IAAI,QAAQ,EAClCF,EAAS,KAAK,CACZ,QAAS,4DACnB,CAAS,EAEJ,CAAA,EACA,MAAMS,GAAS,CACdT,EAAS,MAAM,CACb,QAASS,EAAM,OACvB,CAAO,CACF,CAAA,EACA,QAAQ,IAAM,CACbP,EAAY,SAAW,EAC7B,CAAK,CACL"}