{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport function searchImage(request) {\n    const API_KEY = '49486795-430aa06a6e639b9f88254bdb1'; // Вставити свій API ключ\n    const URL =\n      'https://pixabay.com/api/?key=' +\n      API_KEY +\n      '&q=' +\n      encodeURIComponent(request) +\n      '&image_type=photo' +\n      '&orientation=horizontal' +\n      '&safesearch=true';\n  \n    return axios.get(URL).then(response => [...response.data.hits]);\n  }","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function renderGallery(images, isNewSearch = false) {\n  const galleryContainer = document.querySelector('.gallery');\n\n  // Якщо це новий пошук, очищуємо галерею\n  if (isNewSearch) {\n    galleryContainer.innerHTML = '';\n  }\n\n  const markup = images\n    .map(\n      image => `\n      <li class=\"gallery-item\">\n        <a href=\"${image.largeImageURL}\">\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" width=\"360\" height=\"200\">\n        </a>\n        <div class=\"image-info\">\n          <p><strong>Likes:</strong> ${image.likes}</p>\n          <p><strong>Views:</strong> ${image.views}</p>\n          <p><strong>Comments:</strong> ${image.comments}</p>\n          <p><strong>Downloads:</strong> ${image.downloads}</p>\n        </div>\n      </li>`\n    )\n    .join('');\n\n  galleryContainer.insertAdjacentHTML('beforeend', markup);\n\n  gallery.refresh(); // Оновлюємо SimpleLightbox\n}","import { searchImage } from './js/pixabay-api';\nimport { renderGallery } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\niziToast.settings({\n  position: 'topRight',\n  iconColor: '#fff',\n  messageColor: '#fff',\n});\n\nconst galleryHTML = document.querySelector('.gallery');\nconst form = document.querySelector('.form');\nconst loadMoreBtn = document.querySelector('.load-more'); // Кнопка Load More\nconst loader = document.querySelector('.loader'); // Індикатор завантаження\n\nlet currentPage = 1;\nlet currentQuery = '';\n\nform.addEventListener('submit', handleSubmit);\nloadMoreBtn.addEventListener('click', handleLoadMore);\n\n// **Обробка сабміту форми**\nfunction handleSubmit(event) {\n  event.preventDefault();\n\n  const query = form.elements.request.value.trim();\n  if (!query) {\n    iziToast.warning({\n      message: 'Please enter a search query!',\n    });\n    return;\n  }\n\n  // Очищаємо попередні результати та скидаємо сторінку\n  galleryHTML.innerHTML = '';\n  currentPage = 1;\n  currentQuery = query;\n  loadMoreBtn.classList.add('hidden'); // Ховаємо кнопку Load More\n  form.elements.request.setAttribute('readonly', true); // Блокуємо введення\n  form.elements.button.disabled = true; // Деактивуємо кнопку сабміту\n  loader.classList.remove('hidden'); // Показуємо лоадер\n\n  fetchImages();\n}\n\n// **Обробка натискання Load More**\nfunction handleLoadMore() {\n  currentPage++;\n  fetchImages();\n}\n\n// **Функція отримання зображень**\nfunction fetchImages() {\n  searchImage(currentQuery, currentPage)\n    .then(images => {\n      if (images.length > 0) {\n        renderGallery(images, currentPage === 1); // Передаємо true тільки при першому запиті\n\n        if (images.length < 15) {\n          iziToast.info({\n            message: \"We're sorry, but you've reached the end of search results.\",\n          });\n          loadMoreBtn.classList.add('hidden'); // Ховаємо кнопку Load More\n        } else {\n          loadMoreBtn.classList.remove('hidden'); // Показуємо кнопку Load More\n        }\n\n        smoothScroll(); // Викликаємо функцію плавного скролінгу\n      } else {\n        throw new Error('Sorry, no images found. Please try again!');\n      }\n    })\n    .catch(error => {\n      iziToast.error({\n        iconUrl: './img/error.svg', // Шлях має бути правильним (перевір у проєкті)\n        message: error.message,\n      });\n    })\n    .finally(() => {\n      form.elements.request.removeAttribute('readonly');\n      form.elements.button.disabled = false;\n      loader.classList.add('hidden');\n    });\n}\n\n// **Функція плавного скролінгу**\nfunction smoothScroll() {\n  const { height: cardHeight } = galleryHTML.firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["searchImage","request","URL","axios","response","gallery","SimpleLightbox","renderGallery","images","isNewSearch","galleryContainer","markup","image","iziToast","galleryHTML","form","loadMoreBtn","loader","currentPage","currentQuery","handleSubmit","handleLoadMore","event","query","fetchImages","smoothScroll","error","cardHeight"],"mappings":"owBAEO,SAASA,EAAYC,EAAS,CAEjC,MAAMC,EACJ,gCAFc,qCAId,MACA,mBAAmBD,CAAO,EAC1B,2DAIF,OAAOE,EAAM,IAAID,CAAG,EAAE,KAAKE,GAAY,CAAC,GAAGA,EAAS,KAAK,IAAI,CAAC,CAClE,CCXA,MAAMC,EAAU,IAAIC,EAAe,aAAc,CAC/C,aAAc,MACd,aAAc,GAChB,CAAC,EAEM,SAASC,EAAcC,EAAQC,EAAc,GAAO,CACzD,MAAMC,EAAmB,SAAS,cAAc,UAAU,EAGtDD,IACFC,EAAiB,UAAY,IAG/B,MAAMC,EAASH,EACZ,IACCI,GAAS;AAAA;AAAA,mBAEIA,EAAM,aAAa;AAAA,sBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,uCAGrBA,EAAM,KAAK;AAAA,uCACXA,EAAM,KAAK;AAAA,0CACRA,EAAM,QAAQ;AAAA,2CACbA,EAAM,SAAS;AAAA;AAAA,YAG1D,EACK,KAAK,EAAE,EAEVF,EAAiB,mBAAmB,YAAaC,CAAM,EAEvDN,EAAQ,QAAO,CACjB,CC/BAQ,EAAS,SAAS,CAChB,SAAU,WACV,UAAW,OACX,aAAc,MAChB,CAAC,EAED,MAAMC,EAAc,SAAS,cAAc,UAAU,EAC/CC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAc,SAAS,cAAc,YAAY,EACjDC,EAAS,SAAS,cAAc,SAAS,EAE/C,IAAIC,EAAc,EACdC,EAAe,GAEnBJ,EAAK,iBAAiB,SAAUK,CAAY,EAC5CJ,EAAY,iBAAiB,QAASK,CAAc,EAGpD,SAASD,EAAaE,EAAO,CAC3BA,EAAM,eAAgB,EAEtB,MAAMC,EAAQR,EAAK,SAAS,QAAQ,MAAM,KAAM,EAChD,GAAI,CAACQ,EAAO,CACVV,EAAS,QAAQ,CACf,QAAS,8BACf,CAAK,EACD,MACJ,CAGEC,EAAY,UAAY,GACxBI,EAAc,EACdC,EAAeI,EACfP,EAAY,UAAU,IAAI,QAAQ,EAClCD,EAAK,SAAS,QAAQ,aAAa,WAAY,EAAI,EACnDA,EAAK,SAAS,OAAO,SAAW,GAChCE,EAAO,UAAU,OAAO,QAAQ,EAEhCO,EAAa,CACf,CAGA,SAASH,GAAiB,CACxBH,IACAM,EAAa,CACf,CAGA,SAASA,GAAc,CACrBxB,EAAYmB,CAAyB,EAClC,KAAKX,GAAU,CACd,GAAIA,EAAO,OAAS,EAClBD,EAAcC,EAAQU,IAAgB,CAAC,EAEnCV,EAAO,OAAS,IAClBK,EAAS,KAAK,CACZ,QAAS,4DACrB,CAAW,EACDG,EAAY,UAAU,IAAI,QAAQ,GAElCA,EAAY,UAAU,OAAO,QAAQ,EAGvCS,QAEA,OAAM,IAAI,MAAM,2CAA2C,CAE9D,CAAA,EACA,MAAMC,GAAS,CACdb,EAAS,MAAM,CACb,QAAS,kBACT,QAASa,EAAM,OACvB,CAAO,CACF,CAAA,EACA,QAAQ,IAAM,CACbX,EAAK,SAAS,QAAQ,gBAAgB,UAAU,EAChDA,EAAK,SAAS,OAAO,SAAW,GAChCE,EAAO,UAAU,IAAI,QAAQ,CACnC,CAAK,CACL,CAGA,SAASQ,GAAe,CACtB,KAAM,CAAE,OAAQE,CAAU,EAAKb,EAAY,kBAAkB,sBAAuB,EACpF,OAAO,SAAS,CACd,IAAKa,EAAa,EAClB,SAAU,QACd,CAAG,CACH"}