{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport function searchImage(request) {\n    const API_KEY = '49486795-430aa06a6e639b9f88254bdb1'; // Вставити свій API ключ\n    const URL =\n      'https://pixabay.com/api/?key=' +\n      API_KEY +\n      '&q=' +\n      encodeURIComponent(request) +\n      '&image_type=photo' +\n      '&orientation=horizontal' +\n      '&safesearch=true';\n  \n    return axios.get(URL).then(response => [...response.data.hits]);\n  }","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function renderGallery(images) {\n  const galleryContainer = document.querySelector('.gallery');\n\n  galleryContainer.innerHTML = '';\n\n  const markup = images\n    .map(\n      image => `\n      <li class=\"gallery-item\">\n        <a href=\"${image.largeImageURL}\">\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" width=\"360\" height=\"200\">\n        </a>\n        <div class=\"image-info\">\n          <p><strong>Likes:</strong> ${image.likes}</p>\n          <p><strong>Views:</strong> ${image.views}</p>\n          <p><strong>Comments:</strong> ${image.comments}</p>\n          <p><strong>Downloads:</strong> ${image.downloads}</p>\n        </div>\n      </li>`\n    )\n    .join('');\n\n  galleryContainer.insertAdjacentHTML('beforeend', markup);\n\n  gallery.refresh();\n}\n","import { searchImage } from './js/pixabay-api';\nimport { renderGallery } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// Налаштування iziToast\niziToast.settings({\n  position: 'topRight',\n  iconColor: '#fff',\n  messageColor: '#fff',\n});\n\nconst galleryHTML = document.querySelector('.gallery');\nconst form = document.querySelector('.form');\nconst loadMoreBtn = document.querySelector('.load-more'); // Кнопка \"Load More\"\n\nlet currentPage = 1;\nlet currentQuery = '';\n\nform.addEventListener('submit', handleSearch);\nloadMoreBtn.addEventListener('click', loadMoreImages);\n\nasync function handleSearch(event) {\n  event.preventDefault();\n\n  const request = form.elements['search-text'].value.trim();\n  if (!request) {\n    iziToast.warning({ message: 'Please enter a search query!' });\n    return;\n  }\n\n  // Очищення перед новим запитом\n  galleryHTML.innerHTML = '';\n  currentQuery = request;\n  currentPage = 1;\n  loadMoreBtn.classList.add('hidden'); // Ховаємо кнопку перед пошуком\n\n  toggleLoading(true);\n\n  try {\n    const images = await searchImage(currentQuery, currentPage);\n    if (images.length === 0) {\n      throw new Error('Sorry, no images found. Please try again!');\n    }\n\n    renderGallery(images, galleryHTML);\n    loadMoreBtn.classList.remove('hidden'); // Показуємо кнопку, якщо є зображення\n  } catch (error) {\n    iziToast.error({ message: error.message });\n  } finally {\n    toggleLoading(false);\n  }\n}\n\nasync function loadMoreImages() {\n  currentPage += 1;\n  toggleLoading(true);\n\n  try {\n    const images = await searchImage(currentQuery, currentPage);\n    if (images.length === 0) {\n      iziToast.info({ message: \"We're sorry, but you've reached the end of search results.\" });\n      loadMoreBtn.classList.add('hidden');\n      return;\n    }\n\n    renderGallery(images, galleryHTML);\n\n    // Прокрутка сторінки вниз після завантаження нових зображень\n    const galleryItemHeight = galleryHTML.firstElementChild?.getBoundingClientRect().height || 0;\n    window.scrollBy({ top: galleryItemHeight * 2, behavior: 'smooth' });\n  } catch (error) {\n    iziToast.error({ message: error.message });\n  } finally {\n    toggleLoading(false);\n  }\n}\n\nfunction toggleLoading(isLoading) {\n  const loader = document.querySelector('.loader');\n  if (isLoading) {\n    loader.classList.remove('hidden');\n    form.elements['search-text'].setAttribute('readonly', true);\n    form.elements['search-button'].disabled = true;\n  } else {\n    loader.classList.add('hidden');\n    form.elements['search-text'].removeAttribute('readonly');\n    form.elements['search-button'].disabled = false;\n  }\n}\n"],"names":["searchImage","request","URL","axios","response","gallery","SimpleLightbox","renderGallery","images","galleryContainer","markup","image","iziToast","galleryHTML","form","loadMoreBtn","currentPage","currentQuery","handleSearch","loadMoreImages","event","toggleLoading","error","galleryItemHeight","_a","isLoading","loader"],"mappings":"+vBAEO,SAASA,EAAYC,EAAS,CAEjC,MAAMC,EACJ,gCAFc,qCAId,MACA,mBAAmBD,CAAO,EAC1B,2DAIF,OAAOE,EAAM,IAAID,CAAG,EAAE,KAAKE,GAAY,CAAC,GAAGA,EAAS,KAAK,IAAI,CAAC,CAClE,CCXA,MAAMC,EAAU,IAAIC,EAAe,aAAc,CAC/C,aAAc,MACd,aAAc,GAChB,CAAC,EAEM,SAASC,EAAcC,EAAQ,CACpC,MAAMC,EAAmB,SAAS,cAAc,UAAU,EAE1DA,EAAiB,UAAY,GAE7B,MAAMC,EAASF,EACZ,IACCG,GAAS;AAAA;AAAA,mBAEIA,EAAM,aAAa;AAAA,sBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,uCAGrBA,EAAM,KAAK;AAAA,uCACXA,EAAM,KAAK;AAAA,0CACRA,EAAM,QAAQ;AAAA,2CACbA,EAAM,SAAS;AAAA;AAAA,YAG1D,EACK,KAAK,EAAE,EAEVF,EAAiB,mBAAmB,YAAaC,CAAM,EAEvDL,EAAQ,QAAS,CACnB,CC3BAO,EAAS,SAAS,CAChB,SAAU,WACV,UAAW,OACX,aAAc,MAChB,CAAC,EAED,MAAMC,EAAc,SAAS,cAAc,UAAU,EAC/CC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAc,SAAS,cAAc,YAAY,EAEvD,IAAIC,EAAc,EACdC,EAAe,GAEnBH,EAAK,iBAAiB,SAAUI,CAAY,EAC5CH,EAAY,iBAAiB,QAASI,CAAc,EAEpD,eAAeD,EAAaE,EAAO,CACjCA,EAAM,eAAgB,EAEtB,MAAMnB,EAAUa,EAAK,SAAS,aAAa,EAAE,MAAM,KAAM,EACzD,GAAI,CAACb,EAAS,CACZW,EAAS,QAAQ,CAAE,QAAS,8BAA8B,CAAE,EAC5D,MACJ,CAGEC,EAAY,UAAY,GACxBI,EAAehB,EACfe,EAAc,EACdD,EAAY,UAAU,IAAI,QAAQ,EAElCM,EAAc,EAAI,EAElB,GAAI,CACF,MAAMb,EAAS,MAAMR,EAAYiB,EAAcD,CAAW,EAC1D,GAAIR,EAAO,SAAW,EACpB,MAAM,IAAI,MAAM,2CAA2C,EAG7DD,EAAcC,EAAQK,CAAW,EACjCE,EAAY,UAAU,OAAO,QAAQ,CACtC,OAAQO,EAAO,CACdV,EAAS,MAAM,CAAE,QAASU,EAAM,OAAO,CAAE,CAC7C,QAAY,CACRD,EAAc,EAAK,CACvB,CACA,CAEA,eAAeF,GAAiB,OAC9BH,GAAe,EACfK,EAAc,EAAI,EAElB,GAAI,CACF,MAAMb,EAAS,MAAMR,EAAYiB,EAAcD,CAAW,EAC1D,GAAIR,EAAO,SAAW,EAAG,CACvBI,EAAS,KAAK,CAAE,QAAS,4DAA4D,CAAE,EACvFG,EAAY,UAAU,IAAI,QAAQ,EAClC,MACN,CAEIR,EAAcC,EAAQK,CAAW,EAGjC,MAAMU,IAAoBC,EAAAX,EAAY,oBAAZ,YAAAW,EAA+B,wBAAwB,SAAU,EAC3F,OAAO,SAAS,CAAE,IAAKD,EAAoB,EAAG,SAAU,SAAU,CACnE,OAAQD,EAAO,CACdV,EAAS,MAAM,CAAE,QAASU,EAAM,OAAO,CAAE,CAC7C,QAAY,CACRD,EAAc,EAAK,CACvB,CACA,CAEA,SAASA,EAAcI,EAAW,CAChC,MAAMC,EAAS,SAAS,cAAc,SAAS,EAC3CD,GACFC,EAAO,UAAU,OAAO,QAAQ,EAChCZ,EAAK,SAAS,aAAa,EAAE,aAAa,WAAY,EAAI,EAC1DA,EAAK,SAAS,eAAe,EAAE,SAAW,KAE1CY,EAAO,UAAU,IAAI,QAAQ,EAC7BZ,EAAK,SAAS,aAAa,EAAE,gBAAgB,UAAU,EACvDA,EAAK,SAAS,eAAe,EAAE,SAAW,GAE9C"}